{% extends 'index.html' %}
{% block content %}
    <form action="" method="post" class="schedule">
        {{ form.hidden_tag() }}
        <div class="selects">
            <p style="display: flex; height: 55px; gap: 20px">
                {{ form.grade_level.label(style='font-weight:bold;font-size:32px') }} {{ form.grade_level(style='margin-left:11%;width:100px;border-radius:10px', id='select_grade') }}
            </p>
            {#            <p style="display: flex; height: 40px; gap: 20px; margin-left: 50px">#}
            {#                {{ form.class_word.label }}#}
            {#                {{ form.class_word(style='margin-left:4%;width:50px;border-radius:10px', id='select_class') }}#}
            {#            </p>#}
            <a>{{ form.submit(type="submit", class="btn btn-primary", style='width: 235px; background-color: #202020') }}</a>
        </div>
        <div id="button_container" style="align-items: center;display: flex;justify-content: center"></div>
        <script>
            const classData = {{ classes | tojson }}
            const selector = document.getElementById('select_grade')
            const buttonContainer = document.getElementById('button_container')
            console.log(classData)
            selector.addEventListener('change', function () {
                const selectedGrade = selector.value

                buttonContainer.innerHTML = ''

                if (selectedGrade && classData[selectedGrade]) {
                    classData[selectedGrade].forEach(letter => {
                        const button = document.createElement('button');
                        button.type = 'button'
                        button.textContent = `${selectedGrade}${letter}`
                        button.style = 'height:60px;width:130px;border-radius:35px;' +
                            'margin-bottom:40px;background-color:aliceblue;' +
                            'box-shadow: 4px 5px 4px rgba(27, 60, 195, 0.6);font-weight:bold'
                        buttonContainer.appendChild(button)
                    })
                }
            })
        </script>
        <table class="schedule">
            <thead>
            <tr style="text-align: center">
                <th>Урок</th>
                <th>Понедельник</th>
                <th>Вторник</th>
                <th>Среда</th>
                <th>Четверг</th>
                <th>Пятница</th>
                <th>Суббота</th>
            </tr>
            </thead>
            <tbody>
            {% for lesson_index in range(7) %}
                <tr>
                    <td>{{ lesson_index + 1 }}-й урок</td>
                    {% for day in form.days %}
                        <td {% if form.is_edit.data == False %}style="pointer-events: none"
                            {% else %}style="pointer-events: auto"{% endif %}>{{ day.form.lessons[lesson_index].subject(style='width:200px') }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div>{{ message }}</div>
    </form>


{% endblock %}
